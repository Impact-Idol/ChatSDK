# ChatSDK Production Environment Configuration
# Copy this file to .env.production and fill in the values

# ============================================================================
# Server Configuration
# ============================================================================
API_PORT=5500
HTTP_PORT=80
HTTPS_PORT=443
CENTRIFUGO_PORT=8000

# ============================================================================
# Database Configuration (Managed PostgreSQL)
# ============================================================================
# Use a managed PostgreSQL service in production
# Examples: AWS RDS, DigitalOcean Managed Database, Google Cloud SQL

DB_HOST=your-postgres-host.example.com
DB_PORT=5432
DB_NAME=chatsdk_production
DB_USER=chatsdk_prod
DB_PASSWORD=change-this-to-secure-password
DB_SSL=true

# ============================================================================
# S3-Compatible Object Storage
# ============================================================================
# Supported providers:
# - AWS S3
# - DigitalOcean Spaces
# - Cloudflare R2
# - MinIO (self-hosted)
# - Backblaze B2
# - Wasabi

# AWS S3 Example:
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_REGION=us-east-1

# DigitalOcean Spaces Example:
# S3_ENDPOINT=https://nyc3.digitaloceanspaces.com
# S3_REGION=nyc3

# Cloudflare R2 Example:
# S3_ENDPOINT=https://<account-id>.r2.cloudflarestorage.com
# S3_REGION=auto

S3_ENDPOINT=https://your-s3-endpoint.example.com
S3_REGION=us-east-1
S3_ACCESS_KEY=your-s3-access-key
S3_SECRET_KEY=your-s3-secret-key
S3_BUCKET=chatsdk-production
S3_PUBLIC_URL=https://cdn.example.com  # Optional: CDN URL for public files

# ============================================================================
# Centrifugo Configuration
# ============================================================================
# Centrifugo WebSocket URL (internal - between services)
CENTRIFUGO_URL=ws://centrifugo:8000/connection/websocket

# Centrifugo API URL (internal - for server-side publishing)
CENTRIFUGO_API_URL=http://centrifugo:8000/api

# Centrifugo Secrets (generate secure random strings)
# Generate with: openssl rand -hex 32
CENTRIFUGO_API_KEY=change-this-to-secure-api-key-32-chars-min
CENTRIFUGO_TOKEN_SECRET=change-this-to-secure-token-secret-32-chars-min
CENTRIFUGO_ADMIN_PASSWORD=change-this-to-secure-admin-password
CENTRIFUGO_ADMIN_SECRET=change-this-to-secure-admin-secret

# Centrifugo Log Level (debug, info, warn, error)
CENTRIFUGO_LOG_LEVEL=info

# ============================================================================
# Inngest Configuration (Background Jobs)
# ============================================================================
# Get your Inngest keys from: https://www.inngest.com/
INNGEST_EVENT_KEY=your-inngest-event-key
INNGEST_SIGNING_KEY=your-inngest-signing-key

# ============================================================================
# Redis Configuration (Managed Redis)
# ============================================================================
# Use a managed Redis service in production
# Examples: AWS ElastiCache, Redis Cloud, DigitalOcean Managed Redis

REDIS_HOST=your-redis-host.example.com
REDIS_PORT=6379
REDIS_PASSWORD=change-this-to-secure-redis-password
REDIS_TLS=true

# ============================================================================
# JWT Configuration
# ============================================================================
# Generate secure random strings for JWT secrets
# Generate with: openssl rand -hex 64

# Main JWT secret for API authentication
JWT_SECRET=change-this-to-secure-jwt-secret-64-chars-min

# Separate JWT secret for Centrifugo WebSocket tokens
CENTRIFUGO_JWT_SECRET=change-this-to-secure-centrifugo-jwt-secret-64-chars-min

# ============================================================================
# AI Features (Optional)
# ============================================================================
# OpenAI API key for AI-powered features (message summarization, moderation, etc.)
OPENAI_API_KEY=sk-your-openai-api-key

# ============================================================================
# Logging Configuration
# ============================================================================
# Log level: debug, info, warn, error
LOG_LEVEL=info

# ============================================================================
# Security Notes
# ============================================================================
# 1. Never commit this file with real values to git
# 2. Use a secure secret manager in production (AWS Secrets Manager, HashiCorp Vault, etc.)
# 3. Rotate secrets regularly
# 4. Use different secrets for different environments (dev, staging, production)
# 5. Limit access to secrets on a need-to-know basis

# ============================================================================
# Deployment Checklist
# ============================================================================
# Before deploying to production:
# [ ] Replace all "change-this-*" placeholders with secure random values
# [ ] Set up managed PostgreSQL database
# [ ] Set up S3-compatible object storage
# [ ] Set up managed Redis instance
# [ ] Configure SSL certificates for HTTPS
# [ ] Set up CDN for static assets (optional but recommended)
# [ ] Configure backup strategy for database
# [ ] Set up monitoring and alerting
# [ ] Configure log aggregation (Datadog, New Relic, CloudWatch, etc.)
# [ ] Test disaster recovery procedures
# [ ] Review security settings and access controls
